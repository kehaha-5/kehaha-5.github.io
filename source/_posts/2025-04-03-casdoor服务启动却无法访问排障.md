---
title: casdooræœåŠ¡å¯åŠ¨å´æ— æ³•è®¿é—®æ’éšœ
date: 2025-04-03 14:45:03
tags: [casdoor,æ’éšœ]
---

> æœ€è¿‘ï¼Œæˆ‘ä»¬å›¢é˜Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯casdooræœåŠ¡é‡å¯åï¼Œæ—¥å¿—ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯å°±æ˜¯æ— æ³•è®¿é—®ï¼Œä½¿ç”¨curlåœ¨æœ¬åœ°è®¿é—®ä¹Ÿæ˜¯ä¸é€šã€‚

æ—¥å¿—ï¼š

![log](./casdoor-log.png)

é¦–å…ˆå…ˆç®€ç»ä¸€ä¸‹casdooræ˜¯ä»€ä¹ˆ[æ¦‚è¿° | Casdoor Â· An open-source UI-first Identity and Access Management (IAM) / Single-Sign-On (SSO) platform with web UI supporting OAuth 2.0, OIDC, SAML, CAS, LDAP, SCIM, WebAuthn, TOTP, MFA, RADIUS, Google Workspace, Active Directory and Kerberos](https://casdoor.org/zh/docs/overview)

ç®€å•ç‚¹ç†è§£å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªå®ç°äº†`OAuth 2.0`è®¤è¯çš„ä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥å®Œæˆä¸€ä¸ªè´¦å·å¯¹å¤šä¸ªåº”ç”¨è¿›è¡Œæ— æ„Ÿç™»å½•ï¼ŒåŒæ—¶å¯ä»¥æŠŠç”¨æˆ·æ•°æ®æ”¾åˆ°`casdoor`ä¸­ï¼Œå…¶å®ƒåº”ç”¨çš„æ•°æ®åº“å¯ä»¥åªç”¨æ¥å­˜æ”¾ä¸šåŠ¡æ•°æ®ã€‚

# ç¯å¢ƒ

æ ¹æ®ç›¸å…³åŒå­¦çš„æè¿°ï¼Œç”Ÿäº§ç¯å¢ƒçš„`casdoor`ç¯å¢ƒå¦‚ä¸‹ã€‚

- 3å°æœåŠ¡å™¨ä½¿ç”¨`docker`æˆ–`podman`å¯åŠ¨äº†ä¸€ä¸ª`casdoor`æœåŠ¡ï¼Œå®ç°é«˜å¯ç”¨
- 3å°æœåŠ¡å™¨åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“(`mysql`)
- ä½¿ç”¨nfsæ¥åŒæ­¥`casdoor`ä¸­çš„`tmp`æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸º`casdoor`çš„é»˜è®¤`session`ä¿å­˜ä½ç½®
   - [sessioné…ç½®çš„ç›¸å…³æ–‡æ¡£](https://casdoor.org/zh/docs/basic/server-installation/#%E9%80%9A%E8%BF%87-ini-%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE:~:text=redisEndpoint%20%E5%90%8E%E5%A1%AB%E5%86%99,provider%2Dconfig%E3%80%82)
   - å½“æ—¶è¯¥ tmp æ–‡ä»¶å¤§å°è‡³å°‘æœ‰40Gï¼Œä½†æ˜¯æˆ‘ä»¬ç¯å¢ƒå½“å‰çš„ç”¨æˆ·æ•°é‡ä¸è‡³äºä¼šæœ‰è¿™ä¹ˆå¤šçš„`session`ç¼“å­˜
   - `nfs`å¯¹åº”æŒ‚è½½æœåŠ¡çš„è¿›ç¨‹å ç”¨è¿‡é«˜çš„`cpu`
- `casdoor`çš„ç‰ˆæœ¬ä¸º1.814ï¼Œå…¶ä¸­çš„`beego`ç‰ˆæœ¬ä¸º1.12.3

# æ’æŸ¥

åç»­çš„æ’æŸ¥ç¯å¢ƒæ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­æ­å»ºçš„ï¼Œå¹¶ä¸”å¤åˆ»äº†å¯¹åº”çš„é—®é¢˜ã€‚ç¯å¢ƒå¦‚ä¸‹

- ä½¿ç”¨`dcoker-compose`å¯åŠ¨äº†3ä¸ª`casdoor`å’Œä¸€ä¸ª`mysql`
- å®¿ä¸»æœºçš„`8001`,`8002`,`8003`åˆ†åˆ«æ˜ å°„3ä¸ª`casdoor`çš„8000ç«¯å£
- ä½¿ç”¨äº† docker çš„æŒ‚è½½æŠŠtmpæ–‡ä»¶åŒæ—¶æŒ‚è½½åˆ°äº†æ¯ä¸ª`casdoor`çš„ç›®å½•ï¼ˆæ¨¡æ‹Ÿ`nfs`ï¼‰
- `tmp`çš„æ–‡ä»¶å¤§å°ä¸º`31G`

## ç«¯å£è½¬å‘

å› ä¸ºæœåŠ¡æ˜¯ä½¿ç”¨dockerå¯åŠ¨çš„ï¼Œå¹¶ä¸”ä½¿ç”¨çš„ç½‘ç»œæ¨¡å¼ä¸º`Bridge`ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ’æŸ¥`docker`ç½‘ç»œç›¸å…³çš„é—®é¢˜ã€‚

å…ˆ `curl` `docker`çš„ç½‘å¡(`docker0`)çš„`ip`åœ°å€ï¼Œä½†æ˜¯è¿˜æ˜¯ `curl` ä¸é€šç›¸å…³æœåŠ¡ã€‚

```shell
[root@rocky-testing casdoor]# ss -anpl | grep 8001 # æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µ
tcp   LISTEN 0      4096  0.0.0.0:8001             0.0.0.0:*    users:(("docker-proxy",pid=1456272,fd=7)) 
tcp   LISTEN 0      4096 [::]:8001                [::]:*    users:(("docker-proxy",pid=1456280,fd=7))     
[root@rocky-testing casdoor]# ifconfig docker0 #è·å–dockerçš„ç½‘å¡
docker0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255
        inet6 fe80::1469:daff:febf:1315  prefixlen 64  scopeid 0x20<link>
        ether 16:69:da:bf:13:15  txqueuelen 0  (Ethernet)
        RX packets 32519  bytes 2160933 (2.0 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 37734  bytes 94754551 (90.3 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[root@rocky-testing casdoor]# curl 172.17.0.1:8001 # curl å¯¹åº”çš„ç½‘å¡ip 8001ä¸ºcasdoorå¯åŠ¨çš„ç«¯å£
```

ä½¿ç”¨`nsenter ` è¿›å…¥å¯¹åº”æœåŠ¡çš„`network ns`ï¼Œå¹¶å°è¯•`curl`è®¿é—®æœåŠ¡ï¼Œä½†è¿˜æ˜¯æ— æ³•è®¿é—®

```shell
[root@rocky-testing casdoor]# docker compose top casdoor-1 # è·å–åº”ç”¨çš„pid
WARN[0000] /root/test/casdoor/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
casdoor-1
UID    PID       PPID      C    STIME   TTY   TIME       CMD
1000   1456231   1456210   4    14:58   ?     00:01:21   /server   
[root@rocky-testing casdoor]# nsenter -n --target 1456231 # è¿›å…¥å¯¹åº”çš„ ns
[root@rocky-testing casdoor]# ip link # æŸ¥çœ‹ç½‘å¡ï¼Œè·Ÿå®¿ä¸»æœºçš„ç½‘å¡ä¸ä¸€è‡´ï¼Œåªå‰©ä¸‹loå’Œeth0ç½‘å¡ï¼Œè¯´æ˜è¿›å…¥äº†å®¹å™¨çš„nsä¸­
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0@if898: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default 
    link/ether 82:2e:b0:c9:cc:00 brd ff:ff:ff:ff:ff:ff link-netnsid 0
[root@rocky-testing casdoor]# ss -anlp | grep 8000 # æŸ¥çœ‹ç«¯å£å ç”¨ï¼Œç¡®å®æœåŠ¡å·²ç»å¯åŠ¨ 
tcp   LISTEN 0      4096               *:8000               *:*    users:(("server",pid=1456231,fd=13))
[root@rocky-testing casdoor]# curl 0.0.0.0:8000 # æ— æ³•curlé€šæœåŠ¡
[root@rocky-testing casdoor]# exit # é€€å‡ºå¯¹åº”ns
logout
```

## strace\pstackæŸ¥çœ‹ç³»ç»Ÿè°ƒç”¨

åœ¨ä¸Šè¿°çš„ä¸¤æ­¥æ“ä½œåï¼Œè¿˜æ˜¯`curl`ä¸é€šï¼Œè¯´æ˜æœåŠ¡è™½ç„¶æ—¥å¿—å·²ç»æ‰“å°äº†ï¼Œä½†æ˜¯æœåŠ¡è¿˜æœªå¯ç”¨ã€‚

ä½¿ç”¨`strace`å’Œ`pstack`å‘½ä»¤æŸ¥çœ‹å¯¹åº”åº”ç”¨çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒæŸ¥çœ‹casdoorçš„å¯åŠ¨åçš„è¡Œä¸º

```shell
strace -p 1456231 -f -o ./strace-casdoor-1.log 
pstack 1456231 > ./pstack-casdoor-1.log
```

æŸ¥çœ‹å…¶æ—¥å¿—ï¼Œä»¥ä¸‹æ—¥å¿—å†…å®¹ä¸ºç”Ÿäº§ç¯å¢ƒä¸­è·å–çš„`strace`å’Œ`pstack`æ—¥å¿—

```log
# åˆ†æstraceçš„æ—¥å¿—ï¼Œå‘ç°ç¨‹åºæ˜¯æœ‰è§„å¾‹çš„æ‰§è¡Œä»¥ä¸‹ç³»ç»Ÿè°ƒç”¨
... éƒ½æ˜¯nanosleep({tv_sec=0, tv_nsec=20000}, NULL) = 0 çš„è°ƒç”¨
1146720 nanosleep({tv_sec=0, tv_nsec=20000}, NULL) = 0
1146720 futex(0x45252c0, FUTEX_WAIT_PRIVATE, 0, {tv_sec=0, tv_nsec=103439635} <unfinished ...>
1146729 <... newfstatat resumed>{st_mode=S_IFREG|0644, st_size=20, ...}, AT_SYMLINK_NOFOLLOW) = 0
1146729 --- SIGURG {si_signo=SIGURG, si_code=SI_TKILL, si_pid=1, si_uid=1000} ---
1146729 rt_sigreturn({mask=[]})         = 0
1146729 futex(0x45252c0, FUTEX_WAKE_PRIVATE, 1) = 1
1146720 <... futex resumed>)            = 0
1146729 newfstatat(AT_FDCWD, "tmp/0/0/001575f66990e62d6ed701f24599e1ca",  <unfinished ...>
1146720 nanosleep({tv_sec=0, tv_nsec=20000}, NULL) = 0
1146720 futex(0x45252c0, FUTEX_WAIT_PRIVATE, 0, {tv_sec=0, tv_nsec=43396353} <unfinished ...>
1146704 <... epoll_pwait resumed>[], 128, 998, NULL, 0) = 0
1146704 epoll_pwait(4, [], 128, 0, NULL, 0) = 0
1146704 epoll_pwait(4,  <unfinished ...>
1146720 <... futex resumed>)            = -1 ETIMEDOUT (Connection timed out)
1146720 nanosleep({tv_sec=0, tv_nsec=20000}, NULL) = 0
... éƒ½æ˜¯nanosleep({tv_sec=0, tv_nsec=20000}, NULL) = 0 çš„è°ƒç”¨
# åˆ†æpstackæ—¥å¿—ï¼Œç¨‹åºä¹Ÿæ˜¯ä¸åœåœ°æ‰§è¡Œä»¥ä¸‹æ–¹æ³•
 37028.625 (47.259 ms): server/1146720  ... [continued]: futex())                                            = 0
 37075.871 (         ): server/1146729 newfstatat(dfd: CWD, filename: 0xb77bf0, statbuf: 0xc000adced8, flag: SYMLINK_NOFOLLOW) ...
 37075.900 ( 0.058 ms): server/1146720 nanosleep(rqtp: 0xc00008ff10)                                         = 0
 37075.871 (62.859 ms): server/1146729  ... [continued]: newfstatat())                                       = 0
 37075.965 (         ): server/1146720 futex(uaddr: 0x45252c0, op: WAIT|PRIVATE_FLAG, utime: 0xc00008feb0) ...
 37138.754 ( 0.012 ms): server/1146729 futex(uaddr: 0x45252c0, op: WAKE|PRIVATE_FLAG, val: 1)                = 1
 37075.965 (62.898 ms): server/1146720  ... [continued]: futex())                                            = 0
 37138.781 (         ): server/1146729 newfstatat(dfd: CWD, filename: 0xb77c50, statbuf: 0xc000adcfa8, flag: SYMLINK_NOFOLLOW) ...
 37138.881 ( 0.067 ms): server/1146720 nanosleep(rqtp: 0xc00008ff10)                                         = 0
 37138.954 (25.650 ms): server/1146720 futex(uaddr: 0x45252c0, op: WAIT|PRIVATE_FLAG, utime: 0xc00008feb0)   = -1 ETIMEDOUT (Connection timed out)
 37164.628 ( 0.088 ms): server/1146720 nanosleep(rqtp: 0xc00008ff10)                                         = 0
 37164.724 ( 0.110 ms): server/1146720 nanosleep(rqtp: 0xc00008ff10)                                         = 0
 37164.845 ( 0.085 ms): server/1146720 nanosleep(rqtp: 0xc00008ff10)                                         = 0
```

é€šè¿‡ä¸Šè¿°çš„åˆ†æï¼Œå¯ä»¥å‘ç°`casdoor`ç¨‹åºåœ¨å¯åŠ¨åï¼Œä¸€ç›´è¯»å–`tmp`ç›®å½•ä¸‹çš„æ–‡ä»¶ä¿¡æ¯(å¹¶ä¸”å…¶ä¸­è¿˜æœ‰ä¸€ä¸ªé”)ï¼Œç»“åˆå‰é¢çš„ä¿¡æ¯å¯ä»¥å¾—å‡º`casdoor`åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šä¸€ç›´è¯»å–`tmp`é‡Œé¢çš„`session`ä¿¡æ¯ï¼Œå¯¼è‡´`nfs`çš„è¿›ç¨‹çš„`cpu`ä½¿ç”¨ç‡è¿‡é«˜ã€‚

æ‰€ä»¥åé¢åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æŠŠ`nfs`çš„æŒ‚è½½ç»™å–æ¶ˆäº†(`tmp`ä¸­çš„`session`æ–‡ä»¶å°±ä¼šè¢«æ¸…ç©ºï¼Œå˜æˆä¸€ä¸ªç©ºæ–‡ä»¶å¤¹)ï¼Œåé¢å†å¯åŠ¨ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®æœåŠ¡äº†ï¼Œåç»­å¯èƒ½ä¼šè€ƒè™‘æŠŠ`session`æ”¾åˆ°`redis`ä¸­è¿›è¡Œå¤„ç†ã€‚

# é—®é¢˜ğŸ¤”

è™½ç„¶æœåŠ¡å¯ä»¥å¯åŠ¨äº†ä½†æ˜¯ç•™ä¸‹äº†3ä¸ªé—®é¢˜ï¼š

- **ä¸ºä»€ä¹ˆcasdoorå¯åŠ¨çš„æ—¶å€™è¦å»è®¿é—®sessionæ–‡ä»¶(tmpç›®å½•ä¸‹çš„æ–‡ä»¶)**
- **ä¸ºä»€ä¹ˆcasdoorçš„æ—¥å¿—éƒ½æ˜¾ç¤ºæœåŠ¡çš„ç«¯å£å·²ç»ç›‘å¬äº†ï¼Œä½†æ˜¯curlè¯¥æœåŠ¡è¿˜æ˜¯ä¸èƒ½é©¬ä¸Šè¿”å›è¯·æ±‚**
- **åŒå­¦åæ˜ è¯¥tmpæ–‡ä»¶ä¹‹å‰å·²ç»æ¸…ç†è¿‡ä¸€æ¬¡äº†ï¼Œä½†æ˜¯ä¸€å¤©å·¦å³ç£ç›˜å ç”¨ç‡åˆä¸Šæ¥äº†è¿™æ˜¯ä¸ºä»€ä¹ˆ**

é’ˆå¯¹ä¸Šé¢çš„3ä¸ªé—®é¢˜ï¼Œæˆ‘é€‰æ‹© `æºç ` å¯åŠ¨ğŸ‘€

## ä¸ºä»€ä¹ˆcasdoorå¯åŠ¨æ—¶è¦å»è®¿é—®sessionæ–‡ä»¶

ä¸ºä»€ä¹ˆcasdoorå¯åŠ¨è¦å»è®¿é—®sessionæ–‡ä»¶

é¦–å…ˆæ‰¾åˆ°å¯¹åº”çš„[github.dev/casdoor/casdoor/tree/v1.814.0](https://github.dev/casdoor/casdoor/tree/v1.814.0)ç‰ˆæœ¬ï¼ŒæŸ¥çœ‹å…¶`main.go`

```go
https://github.dev/casdoor/casdoor/blob/a5a627f92efd3cc3f3613ca119b340b66258ce64/main.go#L65-L95
	....
	beego.BConfig.WebConfig.Session.SessionOn = true
	beego.BConfig.WebConfig.Session.SessionName = "casdoor_session_id"
	if conf.GetConfigString("redisEndpoint") == "" {
		beego.BConfig.WebConfig.Session.SessionProvider = "file"
		beego.BConfig.WebConfig.Session.SessionProviderConfig = "./tmp"
	} else {
		beego.BConfig.WebConfig.Session.SessionProvider = "redis"
		beego.BConfig.WebConfig.Session.SessionProviderConfig = conf.GetConfigString("redisEndpoint")
	}
	beego.BConfig.WebConfig.Session.SessionCookieLifeTime = 3600 * 24 * 30 //30å¤©çš„ç¼“å­˜æ—¶é—´
	beego.BConfig.WebConfig.Session.SessionGCMaxLifetime = 3600 * 24 * 30 //30å¤©çš„ç¼“å­˜æ—¶é—´
	// beego.BConfig.WebConfig.Session.SessionCookieSameSite = http.SameSiteNoneMode

	err := logs.SetLogger(logs.AdapterFile, conf.GetConfigString("logConfig"))
	if err != nil {
		panic(err)
	}
	port := beego.AppConfig.DefaultInt("httpport", 8000)
	// logs.SetLevel(logs.LevelInformational)
	logs.SetLogFuncCall(false)

	err = util.StopOldInstance(port)
	if err != nil {
		panic(err)
	}

	go ldap.StartLdapServer()
	go radius.StartRadiusServer()
	go object.ClearThroughputPerSecond()

	beego.Run(fmt.Sprintf(":%v", port))
```

åœ¨ä¸Šé¢çš„ä»£ç é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤æƒ…å†µä¸‹`casdoor`ä½¿ç”¨äº†`SessionProvider`ä¸º`file`ï¼Œå¹¶ä¸”ç›®å½•é…ç½®åˆ°äº†`./tmp`ä¸‹é¢ï¼Œåé¢å¯åŠ¨çš„å°±æ˜¯`beego`çš„æœåŠ¡äº†ï¼Œæ‰€ä»¥åé¢æŸ¥çœ‹çš„æ˜¯å¯¹åº”ç‰ˆæœ¬[beego](https://github.dev/beego/beego/tree/v1.12.11)çš„æºç ã€‚

é¦–å…ˆä»`beego.go`å¼€å§‹å¯åŠ¨æœåŠ¡

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/beego.go#L51-L73
// Run beego application.
// beego.Run() default run on HttpPort
// beego.Run("localhost")
// beego.Run(":8089")
// beego.Run("127.0.0.1:8089")
func Run(params ...string) {
	initBeforeHTTPRun() //è¿™é‡Œå†ç¨‹åºå¯åŠ¨å‰ï¼Œè°ƒç”¨äº†initBeforeHTTPRunè¿™ä¸ªæ–¹æ³•
	if len(params) > 0 && params[0] != "" {
		strs := strings.Split(params[0], ":")
		if len(strs) > 0 && strs[0] != "" {
			BConfig.Listen.HTTPAddr = strs[0]
		}
		if len(strs) > 1 && strs[1] != "" {
			BConfig.Listen.HTTPPort, _ = strconv.Atoi(strs[1])
		}

		BConfig.Listen.Domains = params
	}

	BeeApp.Run()
}
....
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/beego.go#L91-L107
func initBeforeHTTPRun() {
	//init hooks åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ³¨å†Œäº†SessionæœåŠ¡
	AddAPPStartHook(
		registerMime,
		registerDefaultErrorHandler,
		registerSession,
		registerTemplate,
		registerAdmin,
		registerGzip,
	)

	for _, hk := range hooks {
		if err := hk(); err != nil { //åœ¨è¿™é‡Œæ‰§è¡Œäº†æ³¨å†Œçš„sessionæœåŠ¡
			panic(err)
		}
	}
}
```

æŸ¥çœ‹å¯¹åº”çš„`registerSession`çš„ä»£ç å®ç°ï¼Œåœ¨`hook.go`ä¸­

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/hooks.go#L47-L76
func registerSession() error {
	if BConfig.WebConfig.Session.SessionOn {
		var err error
		sessionConfig := AppConfig.String("sessionConfig")
		conf := new(session.ManagerConfig)
		if sessionConfig == "" {
			....
            conf.Gclifetime = BConfig.WebConfig.Session.SessionGCMaxLifetime //å®šä¹‰äº†sessionçš„å­˜æ´»æ—¶é—´
			conf.ProviderConfig = filepath.ToSlash(BConfig.WebConfig.Session.SessionProviderConfig) //åœ¨è¿™é‡Œtmpçš„é…ç½®å˜æˆäº†æ–‡ä»¶è·¯å¾„é…ç½®
			....
		} else {
			if err = json.Unmarshal([]byte(sessionConfig), conf); err != nil {
				return err
			}
		}
		if GlobalSessions, err = session.NewManager(BConfig.WebConfig.Session.SessionProvider, conf); err != nil {
			return err
		}
		go GlobalSessions.GC() //è¿™é‡Œä½¿ç”¨äº†GOåç¨‹å¯åŠ¨äº†ä¸€ä¸ªCGæœåŠ¡ï¼Œè¯¥æ“ä½œä¸ä¼šé˜»å¡ä¸»åç¨‹
	}
	return nil
}
```

è¿›å…¥`GlobalSessions.GC() `å‡½æ•°æŸ¥çœ‹å¯¹åº”å®ç°ï¼Œåœ¨`session.go`ä¸­

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/session.go#L290-L295
// GC Start session gc process.
// it can do gc in times after gc lifetime.
func (manager *Manager) GC() {
	manager.provider.SessionGC() //å¯åŠ¨æ—¶å…ˆæ‰§è¡Œä¸€æ¬¡SessionCG ç„¶åå†ä½¿ç”¨time.AfterFuncæ¥å®šæ—¶æ‰§è¡Œ
	time.AfterFunc(time.Duration(manager.config.Gclifetime)*time.Second, func() { manager.GC() })
}
```

è¿›å…¥`manager.provider.SessionGC() `å‡½æ•°æŸ¥çœ‹å…¶å®ç°ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„`sessionProvider`ä¸º`file`ï¼Œæ‰€ä»¥è¦åœ¨`session/sess_file.go`ä¸­æŸ¥çœ‹å…¶å®ç°

```go
// filepderçš„å®šä¹‰
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L30-L33
var (
	filepder      = &FileProvider{}
	gcmaxlifetime int64
)
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L113-L118
// FileProvider File session provider
type FileProvider struct {
	lock        sync.RWMutex
	maxlifetime int64
	savePath    string
}
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L200-L207
// SessionGC Recycle files in save path
func (fp *FileProvider) SessionGC() {
	filepder.lock.Lock() //è¿™é‡Œå…ˆé”ä½äº†filepder è¿™ä¸ªé”å¾ˆå…³é”®
	defer filepder.lock.Unlock()

	gcmaxlifetime = fp.maxlifetime //è·å–gcè¶…æ—¶æ—¶é—´
	filepath.Walk(fp.savePath, gcpath) //è¿™é‡Œä½¿ç”¨walkæ¥æµè§ˆsessionæ–‡ä»¶ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ‰§è¡Œgcpathçš„å›è°ƒ
}
....
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L284-L296
// remove file in save path if expired
func gcpath(path string, info os.FileInfo, err error) error {
	if err != nil {
		return err
	}
	if info.IsDir() {
		return nil
	}
	if (info.ModTime().Unix() + gcmaxlifetime) < time.Now().Unix() {
		os.Remove(path) //å¦‚æœè¯¥æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´åŠ ä¸Šè¶…æ—¶æ—¶é—´å¤§äºå½“å‰æ—¶é—´åˆ™è¿›è¡Œåˆ é™¤
	}
	return nil
}
```

åˆ°æ­¤ç¬¬ä¸€ä¸ªé—®é¢˜å·²ç»è§£å†³äº†ï¼Œå°±æ˜¯å› ä¸º`beego.go`å¯åŠ¨çš„æ—¶å€™ä¼šæ‰§è¡Œsessionçš„GCï¼Œè€Œç¨‹åºé…ç½®ä¸ºåˆ©ç”¨`file`ä¿å­˜`session`ï¼Œæ‰€ä»¥å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæŸ¥çœ‹`strace`å’Œ`pstack`çš„æ—¥å¿—æ—¶ä¼šæœ‰é”`futex` å’Œæ–‡ä»¶è¯»å–çš„`newfstatat`çš„ç³»ç»Ÿè°ƒç”¨

## ä¸ºä»€ä¹ˆæœåŠ¡æ—¥å¿—éƒ½æ˜¾ç¤ºç«¯å£å·²ç»ç›‘å¬äº†ï¼Œä½†æ˜¯curlè¯¥æœåŠ¡è¿˜æ˜¯ä¸èƒ½é©¬ä¸Šè¿”å›è¯·æ±‚

ä¸ºä»€ä¹ˆæ—¥å¿—å·²ç»æ˜¾ç¤ºäº†ç«¯å£ç»‘å®šäº†ï¼Œä½†æ˜¯`curl`å¯¹åº”æœåŠ¡è¿˜æ˜¯ä¸é€š

åœ¨ä¸Šé¢æˆ‘ä»¬å¾—çŸ¥æˆ‘ä»¬çš„æœåŠ¡æ˜¯åœ¨`beego.go`ä¸­å¯åŠ¨çš„ï¼Œæ‰€ä»¥å…ˆæŸ¥çœ‹å…¶æºç 

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/beego.go#L51-L73
// Run beego application.
// beego.Run() default run on HttpPort
// beego.Run("localhost")
// beego.Run(":8089")
// beego.Run("127.0.0.1:8089")
func Run(params ...string) {
	initBeforeHTTPRun() //è¿™é‡Œå†ç¨‹åºå¯åŠ¨å‰ï¼Œè°ƒç”¨äº†initBeforeHTTPRunè¿™ä¸ªæ–¹æ³•
	if len(params) > 0 && params[0] != "" {
		strs := strings.Split(params[0], ":")
		if len(strs) > 0 && strs[0] != "" {
			BConfig.Listen.HTTPAddr = strs[0]
		}
		if len(strs) > 1 && strs[1] != "" {
			BConfig.Listen.HTTPPort, _ = strconv.Atoi(strs[1])
		}

		BConfig.Listen.Domains = params
	}

	BeeApp.Run() //æ­£å¼å¯åŠ¨æœåŠ¡
}
```

æˆ‘ä»¬è¿™é‡Œç›´æ¥æŸ¥çœ‹`BeeApp.Run()`çš„å®ç°

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/app.go#L62-L239
// Run beego application.
func (app *App) Run(mws ...MiddleWare) {
	addr := BConfig.Listen.HTTPAddr

	if BConfig.Listen.HTTPPort != 0 {
		addr = fmt.Sprintf("%s:%d", BConfig.Listen.HTTPAddr, BConfig.Listen.HTTPPort)
	}
	app.Server.Handler = app.Handlers //è¿™é‡Œçš„app.Handlerså°±æ˜¯å®šä¹‰å¥½çš„è·¯ç”±å’ŒæœåŠ¡ï¼ŒæŠŠå®ƒæ³¨å†Œåˆ°httpæœåŠ¡çš„å›è°ƒé‡Œé¢
	// run cgi server
	if BConfig.Listen.EnableFcgi {
		....
	}
	....
	// run graceful mode
	if BConfig.Listen.Graceful {
        ...
	}
	// run normal mode
	if BConfig.Listen.EnableHTTPS || BConfig.Listen.EnableMutualHTTPS {
		...
	}
	if BConfig.Listen.EnableHTTP {
		go func() {
			app.Server.Addr = addr
			logs.Info("http server Running on http://%s", app.Server.Addr) //å¯¹åº”çš„casdooræ—¥å¿—æ‰“å°çš„åœ°æ–¹
			if BConfig.Listen.ListenTCP4 {
                ...
			} else {
				if err := app.Server.ListenAndServe(); err != nil { //æœåŠ¡å¯åŠ¨äº†
					logs.Critical("ListenAndServe: ", err)
					time.Sleep(100 * time.Microsecond)
					endRunning <- true
				}
			}
		}()
	}
	<-endRunning
}
```

é‚£ä¹ˆå½“æœ‰è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨`app.Handlers`ä¸­çš„`ServeHTTP`æ¥å¤„ç†(å¿…é¡»å®ç°[HandlerFunc](https://cs.opensource.google/go/go/+/go1.24.2:src/net/http/server.go;l=2290) )ï¼Œ`app.Handlers`å°±åœ¨`route.go`é‡Œé¢

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/router.go#L693-L975
// Implement http.Handler interface.
func (p *ControllerRegister) ServeHTTP(rw http.ResponseWriter, r *http.Request) {
	startTime := time.Now()
	....
    https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/router.go#L756-L770
	// session init åœ¨è¿™é‡Œå°†ä¼šå¤„ç†è¯·æ±‚ä¸­çš„session
	if BConfig.WebConfig.Session.SessionOn {
		var err error
		context.Input.CruSession, err = GlobalSessions.SessionStart(rw, r) //é€šè¿‡rwå’Œrè·å–å¯¹åº”çš„sessionä¿¡æ¯
		if err != nil {
			logs.Error(err)
			exception("503", context)
			goto Admin
		}
		defer func() {
			if context.Input.CruSession != nil {
				context.Input.CruSession.SessionRelease(rw)
			}
		}()
	}
	...
}
```

`GlobalSessions.SessionStart`å…¶å®ç°çš„æ–¹æ³•åœ¨`session/session.go`ä¸­

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/session.go#L207-L253
// SessionStart generate or read the session id from http request.
// if session id exists, return SessionStore with this id.
func (manager *Manager) SessionStart(w http.ResponseWriter, r *http.Request) (session Store, err error) {
    sid, errs := manager.getSid(r) // åœ¨è¯·æ±‚ä¸­è·å–sid (sessionId)
	if errs != nil {
		return nil, errs
	}

	if sid != "" && manager.provider.SessionExist(sid) { // å¦‚æœè·å–åˆ°å°±ç”¨idæ¥æŸ¥çœ‹å¯¹åº”çš„sessionStoreï¼Œå¯ä»¥é€šè¿‡sessionStoreæ¥ç®¡ç†sessoin
		return manager.provider.SessionRead(sid)
	}

	// Generate a new session å¦‚æœè·å–ä¸åˆ°sessionå°±é‡æ–°ç”Ÿæˆsession
	sid, errs = manager.sessionID()
	if errs != nil {
		return nil, errs
	}

	session, err = manager.provider.SessionRead(sid)
	if err != nil {
		return nil, err
	}
    // è®¾ç½®ä¸€ä¸ªcookieï¼ŒæŠŠsidæ”¾åˆ°cookieä¸­ï¼Œä¸‹æ¬¡å³å¯åœ¨è¯·æ±‚ä¸­è·å–å¯¹åº”çš„sidï¼Œä»è€Œè·å–session
	cookie := &http.Cookie{
		Name:     manager.config.CookieName,
		Value:    url.QueryEscape(sid),
		Path:     "/",
		HttpOnly: !manager.config.DisableHTTPOnly,
		Secure:   manager.isSecure(r),
		Domain:   manager.config.Domain,
		SameSite: manager.config.CookieSameSite,
	}
	if manager.config.CookieLifeTime > 0 {
		cookie.MaxAge = manager.config.CookieLifeTime
		cookie.Expires = time.Now().Add(time.Duration(manager.config.CookieLifeTime) * time.Second)
	}
	if manager.config.EnableSetCookie {
		http.SetCookie(w, cookie)
	}
	r.AddCookie(cookie)

	if manager.config.EnableSidInHTTPHeader {
		r.Header.Set(manager.config.SessionNameInHTTPHeader, sid)
		w.Header().Set(manager.config.SessionNameInHTTPHeader, sid)
	}

	return
}
```

åœ¨ä¸Šè¿°çš„æºç ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥è¦å…³æ³¨é‡Œé¢çš„`SessionExist`ã€`SessionRead` çš„å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬æŸ¥çœ‹å¯¹åº”çš„æºç ï¼Œåœ¨`session/sess_file.go`ä¸­

```go
https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L176-L190
// SessionExist Check file session exist.
// it checks the file named from sid exist or not.
func (fp *FileProvider) SessionExist(sid string) bool {
	filepder.lock.Lock() // è¿™é‡Œè·Ÿä¸Šé¢çš„sessionCGä¸€æ ·ï¼Œä¸Šé”äº†
	defer filepder.lock.Unlock()

	if len(sid) < 2 {
		SLogger.Println("min length of session id is 2", sid)
		return false
	}

	_, err := os.Stat(path.Join(fp.savePath, string(sid[0]), string(sid[1]), sid))
	return err == nil
}

https://github.com/beego/beego/blob/c280209bf5b94cf31094a200b166c97eb3898851/session/sess_file.go#L128-L176
// SessionRead Read file session by sid.
// if file is not exist, create it.
// the file path is generated from sid string.
func (fp *FileProvider) SessionRead(sid string) (Store, error) {
	invalidChars := "./"
	...
	filepder.lock.Lock() // è¿™é‡Œè·Ÿä¸Šé¢çš„sessionCGä¸€æ ·ï¼Œä¸Šé”äº†
	defer filepder.lock.Unlock()

	err := os.MkdirAll(path.Join(fp.savePath, string(sid[0]), string(sid[1])), 0755) //åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹
	if err != nil {
		SLogger.Println(err.Error())
	}
    // è·å–æ–‡ä»¶å¹¶å†™å…¥sessionä¿¡æ¯æˆ–è€…åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¹¶å†™å…¥sessionä¿¡æ¯
	_, err = os.Stat(path.Join(fp.savePath, string(sid[0]), string(sid[1]), sid)) 
	var f *os.File
	if err == nil {
		f, err = os.OpenFile(path.Join(fp.savePath, string(sid[0]), string(sid[1]), sid), os.O_RDWR, 0777)
	} else if os.IsNotExist(err) {
		f, err = os.Create(path.Join(fp.savePath, string(sid[0]), string(sid[1]), sid))
	} else {
		return nil, err
	}

	defer f.Close()
	// ä¿®æ”¹æ–‡ä»¶Modifyæ—¶é—´ï¼Œåœ¨CGä¸­ä¹Ÿæ˜¯é€šè¿‡è¯¥å±æ€§åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¦è¢«CG
	os.Chtimes(path.Join(fp.savePath, string(sid[0]), string(sid[1]), sid), time.Now(), time.Now())
	var kv map[interface{}]interface{}
    // è¯»å–sessionä¿¡æ¯
	b, err := ioutil.ReadAll(f)
	if err != nil {
		return nil, err
	}
	if len(b) == 0 {
		kv = make(map[interface{}]interface{})
	} else {
		kv, err = DecodeGob(b)
		if err != nil {
			return nil, err
		}
	}

	ss := &FileSessionStore{sid: sid, values: kv}
	return ss, nil
}
```

æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±å¯ä»¥è§£é‡Šï¼Œä¸ºä»€ä¹ˆæ—¥å¿—æ˜¾ç¤ºæœåŠ¡å¯åŠ¨äº†ï¼Œä½†æ˜¯è¯·æ±‚å°±æ˜¯ä¸è¡Œ

å› ä¸ºåœ¨ä¸€å¼€å§‹å¯åŠ¨çš„æ—¶å€™ï¼Œ`beego`å°±ä¼šè‡ªå·±å¯¹`session`æ–‡ä»¶è¿›è¡ŒCGåŒæ—¶`lock`äº†ä¸€ä¸ª`RWMutex`

åé¢è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œ`beego`åˆä¼šè¯»å–ä¸ºäº†è¯»`session`è€Œä¸Šé”ï¼Œä½†æ˜¯å¦‚æœå‰é¢çš„`CG`è¿˜æœªæ‰§è¡Œå®Œæˆï¼Œé‚£ä¹ˆè¿™ä¸ªå°±ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å¯ä»¥ä¸Šé”ä¸ºæ­¢

æ‰€ä»¥å½“`tmp`çš„`session`æ–‡ä»¶è¿‡å¤šï¼Œé‚£ä¹ˆå¯åŠ¨çš„æ—¶å€™å°±è¦èŠ±å¤§é‡æ—¶é—´è¿›è¡Œ`CG`å¯¼è‡´è¯·æ±‚è¢«å¡ä½ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸­`nfs`çš„æŒ‚è½½è¿›ç¨‹ä¼š`cpu`è¿‡é«˜ï¼Œç„¶åæŠŠ`nfs`å–æ¶ˆæŒ‚è½½å(`tmp`ä¸­çš„`session`è¢«æ¸…ç©ºå)ï¼Œå¯åŠ¨åé©¬ä¸Šå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†

ä»¥ä¸‹æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒçš„æ¨¡æ‹Ÿ

```shell
[root@rocky-testing casdoor]# du -h --max-depth=1 ./shared-tmp/ 
....
31G     ./shared-tmp/ # è¿™é‡Œå¼„äº†ä¸€ä¸ª31Gçš„sessionè¯·æ±‚
```

é‡å¯ä¸€ä¸ª`casdoor`æœåŠ¡åï¼Œ`curl`è¯¥æœåŠ¡

![log](./curl-8001.png)

åœ¨ç¬¬ä¸€ä¸ªcurlé€šäº†ä»¥åï¼Œåé¢çš„curlæœåŠ¡å“åº”æ—¶é—´æ‰ä¼šæ­£å¸¸

![log](./curl-8001-normal.png)

## ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™ä¹ˆå¤štmpæ–‡ä»¶

ä¸ºä»€ä¹ˆä¸€å¤©å¤šçš„æ—¶é—´ï¼Œ`tmp`æ–‡ä»¶ä¼šäº§ç”Ÿå¾ˆå¤šçš„æ–‡ä»¶ï¼Œå ç”¨æ¯”è¾ƒå¤§çš„å­˜å‚¨ï¼Ÿ

è¿™å°±ä¸å¾—ä¸æè¿™ä¸ª`casdoor`äº†ï¼Œä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“`casdoor`å¯ä»¥è®©æ˜¯ç”¨æ¥è§£å†³ç”¨æˆ·åœ¨å¤šä¸ªåº”ç”¨ä¸­çš„ç™»å½•é—®é¢˜çš„ï¼Œé‚£ä¹ˆåº”ç”¨åœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™å°±è¦è®¿é—®`casdoor`è·å–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè€Œåˆšå¥½ï¼Œæˆ‘ä»¬åœ¨ç”Ÿäº§çš„ç¯å¢ƒä¸­ï¼Œæœ‰ä¸€ä¸ªæœåŠ¡å¤§æ¦‚ä¼šæ¯ç§’è¯·æ±‚`casdoor`æœåŠ¡3æ¬¡å·¦å³(åé¢æ”¹æˆåˆ©ç”¨ç¼“å­˜æœºåˆ¶äº†)ï¼ŒåŒæ—¶`casdoor`å†…éƒ¨çš„ç¼“å­˜è¶…æ—¶æ—¶é—´é…ç½®è®¾ç½®æˆäº†30å¤©ğŸ™ï¼Œè€Œ`beego`è‡ªå·±é»˜è®¤æ˜¯1å°æ—¶ã€‚

è¿™é‡Œåˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ`beego`é‡Œé¢çš„`session/session.go`ä¸­ä¸æ˜¯æœ‰`manager.provider.SessionExist`æ¥æŸ¥çœ‹`sid`æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„è¯æ‰åˆ›å»ºæ–°çš„ã€‚å¯¹çš„ï¼Œè¿™ä¸ªå¯¹ä¸€èˆ¬ç½‘é¡µä¸Šä½¿ç”¨çš„ç”¨æˆ·æ¥è¯´æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šå¸®ä½ æŠŠ`cookie`æ”¾åˆ°æ¯æ¬¡çš„è¯·æ±‚ä¸­ï¼Œæ‰€ä»¥ä¸€ä¸ªç”¨æˆ·åªç”¨åˆ›å»ºä¸€ä¸ª`sid`å³å¯ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯åº”ç”¨çš„è¯·æ±‚ï¼Œå–å†³äºç¼–å†™åº”ç”¨çš„äººæœ‰æ²¡æœ‰æŠŠ`cookie`æˆ–è€…`sid`ç»™ä½ ä¼ é€’è¿‡æ¥ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’å°±ä¼šå‡ºç°æ¯æ¬¡è¯·æ±‚éƒ½æœ‰é‡æ–°åˆ›å»ºä¸€ä¸ª`sid`å’Œå¯¹åº”çš„`session`ä¿¡æ¯

# æ€»ç»“

æ ¹æ®ä¸Šè¿°çš„åˆ†æï¼Œæˆ‘ç”»å‡ºæ¥äº†æ•´ä¸ªè¯·æ±‚æµç¨‹å›¾

![log](./æµç¨‹å›¾.png)

åŒæ—¶å¾—å‡ºè¿™æ¬¡çš„é—®é¢˜**åº”è¯¥æ˜¯**`beego`æ¡†æ¶çš„é—®é¢˜ğŸ¤¥ï¼Œä½†æ˜¯`casdoor`ä¹Ÿæ˜¯å­˜åœ¨è¿™ä¸€äº›é—®é¢˜çš„~~ï¼ˆæ„Ÿè§‰åƒæ˜¯æœ€ä½³å®è·µï¼‰~~

é¦–å…ˆ`casdoor`çš„ç¼“å­˜è®¾ç½®æˆç«‹30å¤©ï¼Œå¦‚æœç”¨çš„æ˜¯`file`ä½œä¸º`sessionProvider`ï¼Œå½“ç”¨æˆ·æ•°é‡å¤šçš„æ—¶å€™è¿˜æ˜¯ä¼šæœ‰é—®é¢˜ï¼Œæˆ–è€…ä½¿ç”¨`redis`æ¥åš`session`ç¼“å­˜ï¼Œè‡³å°‘`io`æ€§èƒ½æ¯”ç£ç›˜è¦å¿«ï¼Œ`sessionCG`æ—¶é—´ä¹Ÿå¿«

é™¤äº†ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å…¶å®ƒåœ°æ–¹ä¹Ÿå‘ç°äº†ä¸€äº›é—®é¢˜

æ¯”å¦‚åœ¨è®¿é—®`/api/get-groups`æ—¶ï¼Œå¯¹åº”çš„æ¥å£åœ¨è°ƒç”¨çš„æ—¶å€™æ²¡æœ‰ä¼ åˆ†é¡µå‚æ•°ï¼Œæ‰€ä»¥ä¼šå…¨æŸ¥æ•°æ®è¡¨ï¼Œåˆšå¥½é‡Œé¢æœ‰ä¸ªè·å–å¤šæ¡æ•°æ®ï¼Œç„¶åå¾ªç¯å¤šæ¡æ•°æ®å¹¶åç¨‹æŸ¥è¯¢æ•°æ®åº“ï¼Œé‚£ä¸ªæ—¶å€™åˆšå¥½æˆ‘ä»¬å¼„äº†å¾ˆå¤šæµ‹è¯•æ•°æ®ï¼Œå¯¼è‡´è¯¥ç¯å¢ƒä¸‹è°ƒç”¨è¯¥æ¥å£å°±ä¼šæŠŠæ•°æ®åº“è¿æ¥æ‰“æ»¡äº†ã€‚åé¢å¤„ç†æ–¹æ¡ˆåº”è¯¥æ˜¯æ›´æ¢äº†å…¶å®ƒç‰ˆæœ¬çš„`casdoor`ï¼Œåœ¨ç›®å‰ç¯å¢ƒçš„é‚£ä¸ªç‰ˆæœ¬æ‰¾ä¸åˆ°å¯¹åº”çš„æ¥å£ä¿¡æ¯äº†ã€‚



